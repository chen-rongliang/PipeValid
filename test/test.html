<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>PipeValid 2.0测试</title>
</head>
<body>

<script src="../src/util.js"></script>
<script src="../src/thenable.js"></script>
<script src="../src/checker.js"></script>
<script src="../src/item.js"></script>
<script src="../src/pipeValid.js"></script>
<script>
  var pipe = new PipeValid();
  var checkName = pipe.check('name');
  pipe.define('isBear', function(val) {
    return val === 'bear';
  });
  pipe.define('badWord', function(val) {
    return new Promise(function(resolve, reject) {
      setTimeout(function() {
        if (val.indexOf('bad') >= 0) {
          reject();
        } else {
          resolve();
        }
      }, 1000);
    });
  });

  checkName.min(3, '名字最少3位')
    .then()
    .notEmpty('名字不能空哦')
    .end()
    .max(20, '名字不大于20位');

  var result = pipe.start({
    name: '宗熊'
  });
  result.then(function() {
    console.log('全部成功');
  }, function(error) {
    console.error(error);
  });
</script>
</body>
</html>
